extends layout
block content
  include includes/header.pug
  .content.class1
    p HELLO #{name}, how are ya?
    img.profile-pic(src="data:image/jpeg; base64, " + avatar)
    form(action='/profile/upload/image', method='post', enctype='multipart/form-data')
      label(for="avatar-upload").custom-avatar-upload Изменить
      input(type='file', id='avatar-upload', name='avatar-upload', onchange='this.form.submit()')
  .files#files
    if !files
      .list-empty
        form(action='/profile/upload/files', method='post', enctype='multipart/form-data')
          label(for='files-upload').custom-files-upload Добавить файлы
          input(type='file', id='files-upload', name='files-upload', multiple, onchange='this.form.submit()')  
        p You don't have any files!      
        p drag'n'drop files in this section to upload
    else 
      form(action='/profile/upload/files', method='post', enctype='multipart/form-data')
        label(for='files-upload').custom-files-upload Добавить файлы
        input(type='file', id='files-upload', name='files-upload', multiple, onchange='this.form.submit()')
      #files-list.files-list
        span.files-description.files-index
          strong Номер
        span.files-description.files-name
          strong Название
        span.files-description.files-kind
          strong Тип
        span.files-description.fles-mark
          strong Оценка
        span.files-description.files-details
          strong Описание (тема выступления, место)
        span.files-description.files-date
          strong Дата участия
        span.files-description.files-created
          strong Дата создания
        span.files-description.files-actions
          strong Действие
        each file, index in files
          .item
            span.file-index
              i #{index+1}
          .item
            span.file-name
              a(href='/profile/download/files/' + file._id).file-download= file.name
          .item
            span.file-kind #{file.kind}
          .item
            span.file-mark #{file.mark}
          .item
            span.file-details
              .file-subject Тема: #{file.subject}
              .file-place Место: #{file.place}
          .item
            span.file-date #{file.date}
          .item
            span.file-created
              i= file.created
          .item
            span.file-actions
              a(href='/profile/delete/files/' + file._id).file-delete delete file
              a(href='#change-file' onclick=`editFile(${JSON.stringify(file)})`).file-edit change file

